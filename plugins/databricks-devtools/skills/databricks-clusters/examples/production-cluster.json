{
  "cluster_name": "prod-etl-pipeline",
  "spark_version": "17.3.x-scala2.13",
  "node_type_id": "r5d.4xlarge",
  "driver_node_type_id": "r5d.4xlarge",
  "num_workers": 8,
  "autotermination_minutes": -1,
  "enable_elastic_disk": true,
  "runtime_engine": "PHOTON",
  "autoscale": {
    "min_workers": 6,
    "max_workers": 12
  },
  "aws_attributes": {
    "first_on_demand": 3,
    "availability": "SPOT_WITH_FALLBACK",
    "spot_bid_price_percent": 100
  },
  "ssh_public_keys": [],
  "custom_tags": {
    "Environment": "production",
    "Application": "etl-pipeline",
    "Team": "data-engineering",
    "CostCenter": "data-platform",
    "DataClassification": "confidential",
    "Compliance": "soc2"
  },
  "spark_conf": {
    "spark.databricks.io.cache.enabled": "true",
    "spark.sql.adaptive.enabled": "true",
    "spark.sql.adaptive.coalescePartitions.enabled": "true",
    "spark.sql.adaptive.skewJoin.enabled": "true",
    "spark.sql.shuffle.partitions": "200",
    "spark.sql.autoBroadcastJoinThreshold": "10mb",
    "spark.databricks.delta.autoCompact.enabled": "true",
    "spark.databricks.delta.optimizeWrite.enabled": "true"
  },
  "init_scripts": [
    {
      "dbfs": {
        "destination": "dbfs:/init-scripts/production-setup.sh"
      }
    }
  ],
  "enable_local_disk_encryption": true,
  "data_security_mode": "SINGLE_USER"
}
